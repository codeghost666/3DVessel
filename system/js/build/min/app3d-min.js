!function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";var n=e("../core/vessels-3d.js"),o=e("../utils/js-helpers.js"),a=e("../utils/dom-utilities.js"),r=e("../colors/colors-widget.js"),s=e("../core/i18labels.js"),l=document.getElementById("app-3d"),d=document.getElementById("titleH1"),c=document.getElementById("titleBay"),u=document.getElementById("info-window"),h=document.getElementById("dropColors"),p=document.getElementById("launchColorsWidget"),v=o.getQueryParams(),m,f,y;y={dropFilter:null,dropFilterValue:null,showWireframes:null,currentlyHidden:[],latestFilter:"",dropBays:null,dropBaysDictionary:{},dropAddHouse:null,openBayInfo:null,closeBayInfo:null,bayInfo:null,bayInfoTable:null,baySelected:"",shipHouseSpace:20.5,isExpanded:!1,prevnextCont:null,prevnextNum:1,numContsByBlock:null,hatchDecksVisible:!0,init:function b(){var e=h,t=document.getElementById("dropFilter"),i=void 0,n=void 0,r=y,s=m.data.filters;r.dropFilterValue=document.getElementById("dropFilterValue"),r.showWireframes=document.getElementById("showWireframesFiltered"),r.expandViewBtn=document.getElementById("expandView"),r.prevnextCont=document.getElementById("prevnext-container"),r.dropFilter=t,r.checkboxHatchCovers=document.getElementById("view-hcs"),r.navBaysNext=document.getElementById("bay-next"),r.navBaysPrev=document.getElementById("bay-prev"),n=document.createElement("option"),n.value="",n.innerHTML="None",t.appendChild(n);for(i in s)n=document.createElement("option"),n.value=i,n.innerHTML=s[i].name,t.appendChild(n),n=document.createElement("option"),n.value=i,n.innerHTML=s[i].name,e.appendChild(n);e.value="i",a.addEventLnr(t,"change",r.prepareFilter),a.addEventLnr(r.dropFilterValue,"change",r.processFilterValue),a.addEventLnr(e,"change",r.colorize),a.addEventLnr(r.showWireframes,"change",r.listenWireframeDisplay),a.addEventLnr(window,"keydown",r.checkKeyPressed),a.addEventLnr(r.expandViewBtn,"change",r.expandView),a.addEventLnr(r.checkboxHatchCovers,"change",r.toggleHatchCovers),a.addEventLnr(r.navBaysNext,"click",function(){o.callOnCondition(r.isExpanded,r.expandViewNext,r.baysControlNext)}),a.addEventLnr(r.navBaysPrev,"click",function(){o.callOnCondition(r.isExpanded,r.expandViewPrev,r.baysControlPrev)}),r.addBaysControl(),r.addHouseControl(),r.pauseControls(!1)},addBaysControl:function g(){function e(e){var t=e.target.value;p.isolateBay(t)}var t,i,n,r,s=document.getElementById("dropBays"),l=[],d,c,u,h,p=y,v,f=m.renderer3d.g3Bays,b=m.data.dataStructured,g=["<option value=''>All bays</option>"];for(t in f)r=f[t],r.children.length>0&&l.push(r.name.replace("b",""));for(l=l.sort(o.sortNumeric),i=0,n=l.length;n>i;i+=1)v=Number(l[i]),d=v%2===1,d?b[l[i]].n&&(g.push("<option value='"+l[i]+"'>"+l[i]+"</option>"),p.dropBaysDictionary[l[i]]=l[i]):(c=n>i+1&&Number(l[i+1])===v+1,c||p.dropBaysDictionary[o.pad(v-1,3)]||(g.push("<option value='"+o.pad(v,3)+"'>"+o.pad(v-1,3)+"</option>"),p.dropBaysDictionary[o.pad(v-1,3)]=o.pad(v,3)));s.innerHTML=g.join(""),p.dropBays=s,a.addEventLnr(p.dropBays,"change",e),p.openBayInfo=document.getElementById("open-panel"),p.closeBayInfo=document.getElementById("close-panel"),p.bayInfo=document.getElementById("bay-panel"),p.bayInfoTable=document.getElementById("bay-table-container"),a.addEventLnr(p.openBayInfo,"click",p.showBayInfo),a.addEventLnr(p.closeBayInfo,"click",p.showBayInfo),p.openBayInfo.style.left="-300px"},baysControlNext:function E(){var e=y,t=e.dropBays.selectedIndex+1,i=e.dropBays.length;i>t&&(e.dropBays.selectedIndex=t,e.isolateBay(e.dropBays.value)),e.navBaysPrev.className="prevnext bay-prev noselect "+(t>2?"active":""),e.navBaysNext.className="prevnext bay-next noselect "+(t+1>=i?"":"active")},baysControlPrev:function x(){var e=y,t=e.dropBays.selectedIndex-1,i=e.dropBays.length;t>=0&&(e.dropBays.selectedIndex=t,e.isolateBay(e.dropBays.value)),e.navBaysPrev.className="prevnext bay-prev noselect "+(t>2?"active":""),e.navBaysNext.className="prevnext bay-next noselect "+(t+1>=i?"":"active")},addHouseControl:function w(){var e=y,t=document.getElementById("dropAddHouse"),i=m.data.dataStructured,n,r,s,l,d=["<option value=''>No house</option>"];for(r=o.objKeysToArray(e.dropBaysDictionary),r=r.sort(o.sortNumeric),s=r.length-1;s>=0;s-=1)n=r[s],i[n].maxD>20&&d.push("<option value='"+e.dropBaysDictionary[n]+"'>before "+n+"</option>");t.innerHTML=d.join(""),a.addEventLnr(t,"change",e.moveShipHouseLnr),e.dropAddHouse=t},prepareFilter:function T(e){var t=e.target.value,i,n,o=["<option value=''>No filter</option>"],a=y,r=m.data.filters;if(!t)return a.pauseControls(!0),a.showHiddenMeshes(),a.pauseControls(!1),a.dropFilterValue.value="",a.dropFilterValue.innerHTML=o.join(""),void a.dropFilterValue.setAttribute("disabled","disabled");if(a.latestFilter!==t&&(a.pauseControls(!0),a.showHiddenMeshes(),a.pauseControls(!1)),a.latestFilter=t,a.dropFilterValue.removeAttribute("disabled"),a.dropFilterValue.innerHTML="",n=r[t],n.tf)o.push("<option value='1'>yes</option>"),o.push("<option value='0'>no</option>");else for(i in n.obs)o.push("<option value='"+i+"'>"+i+"</option>");a.dropFilterValue.innerHTML=o.join("")},processFilterValue:function C(e){var t=e.target.value,i=y,n=i.dropFilter,o,a,r,s=i.showWireframes.checked,l=m.data.filters,d=m.data.allContainerMeshesObj,c=[],u,h;if(i.pauseControls(!0),i.showHiddenMeshes(),""===t)return void i.pauseControls(!1);u=l[i.dropFilter.value].obs;for(r in u)if(i.dropFilterValue.value!==r)for(o=0,a=u[r].indexes.length;a>o;o+=1)h=d[u[r].indexes[o].c],s?(h.isBasic=!0,h.material=m.renderer3d.basicMaterial):h.visible=!1,c.push(u[r].indexes[o].c);i.currentlyHidden=c,i.pauseControls(!1)},processWireframeDisplay:function R(e){var t=y,i=t.currentlyHidden,n,o,a=m.data.allContainerMeshesObj,r=i.length;if(r)for(n=0;r>n;n+=1)o=a[i[n]],e?(o.isBasic=!0,o.material=m.renderer3d.basicMaterial,o.visible=!0):o.visible=!1},listenWireframeDisplay:function H(e){var t=e.target.checked,i=y;i.pauseControls(!0),i.processWireframeDisplay(t),i.pauseControls(!1)},showHiddenMeshes:function B(){var e=y.currentlyHidden,t,i,n=e.length,o=m.data.allContainerMeshesObj;if(n>0)for(t=0;n>t;t+=1)i=o[e[t]],i.isBasic&&(i.material=m.renderer3d.allMaterials[i.materialPos],i.isBasic=!1),i.visible=!0;y.currentlyHidden=[]},pauseControls:function S(e){var t=y,i;return e?(i=t.dropFilterValue.getAttribute("disabled"),t.dropFilter.setAttribute("disabled","disabled"),t.dropFilterValue.setAttribute("disabled","disabled"),t.dropFilterValue.setAttribute("prevAttr",i),t.showWireframes.setAttribute("disabled","disabled"),t.dropBays.setAttribute("disabled","disabled"),void t.dropAddHouse.setAttribute("disabled","disabled")):(i=t.dropFilterValue.getAttribute("prevAttr"),t.dropFilter.removeAttribute("disabled"),"disabled"!==i&&t.dropFilterValue.removeAttribute("disabled"),t.showWireframes.removeAttribute("disabled"),void(t.isExpanded||(t.dropBays.removeAttribute("disabled"),t.baySelected||t.dropAddHouse.removeAttribute("disabled"))))},colorize:function M(e){var t=e.target.value,i,n,o,a,r=m.data.allContainerMeshesObj,s=m.data.filters,l=m.data.data;for(y.showColorsTable(t),i=0,n=l.info.contsL;n>i;i+=1)a=l.conts[i],o=r[a.cDash],o.materialPos=s[t].obs[a[t]].materialPos,o.isBasic||(o.material=m.renderer3d.allMaterials[o.materialPos])},isolateBay:function k(e){function t(e){function t(){var e=document.createElement("tr");for(C=0;y>=C;C+=1)R=o.pad(C,2),M=document.createElement("th"),M.innerHTML=R,C%2===0?e.appendChild(M):e.insertBefore(M,e.firstChild);return e.insertBefore(document.createElement("th"),e.firstChild),e.appendChild(document.createElement("th")),e}var i,n,a,s,l,d,c,v,m,f,y,b={},g,E,x=!1,w,T,C,R,H,B,S,M;if(a=e,a%2===0&&(x=!0,a-=1),d=e-1,p["b"+o.pad(d,3)]||(d+=2),p["b"+o.pad(d,3)]||(d=0),g=o.pad(a,3),E=o.pad(e,3),c=JSON.parse(JSON.stringify(u[g])),a!==e){v=JSON.parse(JSON.stringify(u[E]));for(i in c.cells){s=c.cells[i];for(n in s.tiers)l=s.tiers[n],0===l.p.indexOf(g)&&(c.cells[i].tiers[n]=null)}for(i in v.cells){s=v.cells[i];for(n in s.tiers)l=s.tiers[n],0===l.p.indexOf(E)&&(c.cells[i]||(c.cells[i]={tiers:{}}),c.cells[i].tiers[n]=l)}}for(i in c.cells)for(n in c.cells[i].tiers)b[n]||(b[n]=1);for(m=o.objKeysToArray(c.cells,!0),f=o.objKeysToArray(b,!0),y=Number(m[m.length-1]),B=document.createElement("table"),B.setAttribute("align","center"),S=t(),B.appendChild(S),w=f.length-1;w>=0;w-=1){for(S=document.createElement("tr"),S.setAttribute("data-tier",f[w]),B.appendChild(S),C=0;y>=C;C+=1)R=o.pad(C,2),M=document.createElement("td"),M.id="td_"+R+"_"+f[w],c.cells[R]&&c.cells[R].tiers[f[w]]?(l=c.cells[R].tiers[f[w]],H=[],H.push(l.s?"F <br />":"e <br />"),H.push("<span class='dest' style='background:"+h.d.obs[l.d].color+"'>"+l.d+"</span><br />"),H.push("<span class='haz "+(l.w?"isHaz":"")+"'>"+(l.w?"HAZARDOUS":"")+"</span>"),H.push("<span class='cont'>"+l.c.substr(0,4)+"<br />"+l.c.substr(4)+"</span> "),H.push("<span class='opr' style='background:"+h.o.obs[l.o].color+"'>"+l.o+"</span><br />"),H.push("<span class='iso'>"+l.i+"</span><br />"),H.push("<span class='mt'>"+l.m+"MT</span> "),M.innerHTML=H.join("")):(M.innerHTML="&nbsp;",M.className="empty"),C%2===0?S.appendChild(M):S.insertBefore(M,S.firstChild);M=document.createElement("td"),M.innerHTML=f[w],M.className="th",S.insertBefore(M,S.firstChild),M=document.createElement("td"),M.innerHTML=f[w],M.className="th",S.appendChild(M)}S=t(),B.appendChild(S),r.bayInfoTable.innerHTML="",r.bayInfoTable.appendChild(B)}function i(e,t,i,n,a){var r,s,l,d,c,u,h;c=e-1,p["b"+o.pad(c,3)]||(c+=2);for(r in p)h=p[r],s=Number(h.name.replace("b","")),s!==e&&s!==c&&(e>s?TweenLite.to(h.position,t,{z:h.originalZ-i,delay:n,ease:Power2.easeInOut}):TweenLite.to(h.position,t,{z:h.originalZ+i,delay:n,ease:Power2.easeInOut}));return m.renderer3d.shipHouse.mesh.visible&&(u=e<v.currPosBay?i:-i,TweenLite.to(v.mesh.position,t,{z:v.currPosZ+u,delay:n,ease:Power2.easeInOut})),l=p["b"+o.pad(e,3)],d=p["b"+o.pad(c,3)],l&&TweenLite.to(l.position,t,{y:a,delay:.5,ease:Power2.easeInOut}),d&&TweenLite.to(d.position,t,{y:a,delay:.5,ease:Power2.easeInOut}),l.originalZ}function n(e){var t,n,o,a,r,u,h,p,v,f,b,g=y,E,x,w,T=m.options,C=m.renderer3d.controls,R=m.renderer3d.camera.position;if(g.pauseControls(!0),g.expandViewBtn.setAttribute("disabled","disabled"),w=""!==g.baySelected,w?(i(Number(g.baySelected),.35,0,0,0),s>0&&(c=i(s,.4,l,.75,d))):c=i(s,1,l,0,d),""!==e){g.baySelected=e,a=c-240,r=d,u=0,h=d-10,b=.5,C.dampingFactor=T.dampingFactorIn,E=30,c+=11,g.checkboxHatchCovers.setAttribute("disabled","disabled"),g.expandViewBtn.setAttribute("disabled","disabled"),m._bayNode.innerHTML="<small>bay</small> "+s,g.prevnextCont.style.display="block";var H=g.dropBays.selectedIndex,B=g.dropBays.length;g.navBaysPrev.className="prevnext bay-prev noselect "+(H>1?"active":""),g.navBaysNext.className="prevnext bay-next noselect "+(H+1===B?"":"active")}else g.baySelected="",a=g.initialCameraPosition.z,r=g.initialCameraPosition.y,u=g.initialCameraPosition.x,h=0,c=g.initialCameraPosition.targetZ,b=0,C.dampingFactor=T.dampingFactorOut,E=-300,g.checkboxHatchCovers.removeAttribute("disabled"),g.prevnextCont.style.display="none";TweenLite.to(R,1,{x:u,y:r,z:a,delay:b,ease:Power2.easeInOut}),TweenLite.to(C.target,2,{y:h,x:0,z:c,ease:Power2.easeInOut}),TweenLite.to(g.openBayInfo,1,{left:E,delay:4*b,ease:Power2.easeInOut}),setTimeout(function(){""===g.baySelected&&g.expandViewBtn.removeAttribute("disabled"),g.pauseControls(!1)},2500)}var a=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=y,s=Number(e),l=40,d=500,c,u=m.data.dataStructured,h=m.data.filters,p=m.renderer3d.g3Bays,v=m.renderer3d.shipHouse;n(e?e:""),e?(r.dropAddHouse.setAttribute("disabled","disabled"),t(s)):r.dropAddHouse.removeAttribute("disabled")},showBayInfo:function _(e){var t="open-panel"===e.target.id,i=y;t?(i.bayInfo.style.display="block",m.pauseRendering()):(i.bayInfo.style.display="none",m.resumeRendering())},tryToLaunchBay:function L(e){var t=y,i=m.data.dataStructured,n,a;if(e&&"n"!==e){if(i[e])return t.dropBays.value=t.dropBaysDictionary[e],void t.isolateBay(e);n=Number(e),a=o.pad(n+1,3),i[a]&&(t.dropBays.value=a,t.isolateBay(a))}},moveShipHouseLnr:function N(e){var t=e.target.value;y.moveShipHouse(t)},moveShipHouse:function P(e){var t,i,n,o=y,a,r,s,l=m.renderer3d.shipHouse,d=m.renderer3d.g3Bays,c=m.renderer3d.hatchCovers,u=o.shipHouseSpace;if(m.pauseRendering(),l.currPosBay>0)for(t in d)i=d[t],n=Number(i.name.replace("b","")),n<l.currPosBay&&(i.position.z+=u,i.originalZ+=u,c[t]&&(c[t].position.z+=u,c[t].originalZ+=u));if(""===e)return l.mesh.visible=!1,void m.resumeRendering();l.currPosBay=Number(e);for(t in d)i=d[t],n=Number(i.name.replace("b","")),n<l.currPosBay&&(i.position.z-=u,i.originalZ-=u,c[t]&&(c[t].position.z-=u,c[t].originalZ-=u));l.mesh.visible=!0,l.mesh.position.z=d["b"+e].position.z-u-.5,l.currPosZ=Number(l.mesh.position.z),m.resumeRendering()},checkKeyPressed:function D(e){var t=y;switch(e.keyCode){case 27:if(t.isExpanded)return;""!==t.baySelected?(t.dropBays.value="",t.bayInfo.style.display="none",m.renderer3d._isRendering=!0,t.isolateBay("")):TweenLite.to(m.renderer3d.camera.position,1,{y:t.initialCameraPosition.y,x:t.initialCameraPosition.x,z:t.initialCameraPosition.z,ease:Power2.easeInOut})}},showColorsTable:function I(e){var t=document.getElementById("tableColors"),i=[],n,e,o,a,r=m.data.filters;o=r[e].tf;for(n in r[e].obs)a=r[e].obs[n],o?i.push("<li><span style='background:"+a.color+"'></span>"+("1"===n?"yes":"no")+"</li>"):i.push("<li><span style='background:"+a.color+"'></span>"+n+"</li>");t.innerHTML=i.join("")},expandView:function O(e){function t(){if(!a.numContsByBlock){var e={},t=void 0,i=void 0,n=m.data.numContsByBay;for(t=1;E+1>=t;t+=1)i=o.pad(t,3),l=u["b"+i],l&&(e[l.compactBlockNum]||(e[l.compactBlockNum]={n:0}),e[l.compactBlockNum].n+=n[i]||0);a.numContsByBlock=e}}function i(){var e=void 0;for(a.dropBays.setAttribute("disabled","disabled"),a.dropAddHouse.setAttribute("disabled","disabled"),""!==a.baySelected&&(a.openBayInfo.style.left="-300px"),c=1;E+1>=c;c+=1)d=o.pad(c,3),l=u["b"+d],l&&(e=a.numContsByBlock[l.compactBlockNum],l.isBlockStart&&e.n&&(b-=f,l.labels.visible=!0),l.position.z=1&c&&!l.isBlockStart?22.5+v:0,l.position.x=b,l.position.y=0);a.prevnextNum=1,a.navBaysPrev.className="prevnext bay-prev noselect ",m._bayNode.innerHTML="<small>bay</small> 1",m.renderer3d.simpleDeck.visible=!1,m.renderer3d.hatchDeck.visible=!1,m.renderer3d.shipHouse.prevVisible=m.renderer3d.shipHouse.mesh.visible,m.renderer3d.shipHouse.mesh.visible=!1,m.renderer3d.camera.position.set(0,-2,.8*-f),m.renderer3d.controls.target.set(0,0,20),a.prevnextCont.style.display="block",a._showBaysHatchCovers(a.hatchDecksVisible)}function n(){for(d in u)l=u[d],l.position.z=l.originalZ,l.position.x=0,l.position.y=0,l.labels&&(l.labels.visible=!1);var e=y.initialCameraPosition;m.renderer3d.setCameraPosition(e.x,e.y,e.z),m.renderer3d.controls.target.x=0,m.renderer3d.controls.target.y=0,m.renderer3d.controls.target.z=e.targetZ,m.renderer3d.simpleDeck.visible=!0,m.renderer3d.hatchDeck.visible=a.hatchDecksVisible,m.renderer3d.shipHouse.mesh.visible=m.renderer3d.shipHouse.prevVisible,a.prevnextCont.style.display="none",a.pauseControls(!1)}var a=y,r=e.target.checked,s=void 0,l=void 0,d=void 0,c=void 0,u=m.renderer3d.g3Bays,h=m.data.dataStructured,p=m.renderer3d.maxWidth,v=m.options.extraSep,f=p*(9.5+v)*1.5,b=f,g=!0,E=m.data.lastBay;t(),a.isExpanded=r,m.pauseRendering(),(r?i:n)(),m.resumeRendering()},expandViewNext:function j(){y.expandViewNextPrev(!0)},expandViewPrev:function A(){y.expandViewNextPrev(!1)},expandViewNextPrev:function V(e){function t(){var t=void 0,n=void 0;s=i.prevnextNum;do if(s+=e?1:-1,0>=s||s>m.renderer3d.maxCompactBlockNums)return null;while(i.numContsByBlock[s].n<=0);for(i.navBaysPrev.className="prevnext bay-prev noselect "+(s>1?"active":""),i.navBaysNext.className="prevnext bay-next noselect "+(s===m.renderer3d.maxCompactBlockNums?"":"active"),n=1;d+1>=n;n+=1)if(a=o.pad(n,3),t=l["b"+a],t&&t.compactBlockNum===s&&i.numContsByBlock[t.compactBlockNum].n)return t;return null}var i=y,n=.5,a=void 0,r=void 0,s=void 0,l=m.renderer3d.g3Bays,d=m.data.lastBay,c=function u(e,t){return e?t:!t};r=t(),r&&(TweenLite.to(m.renderer3d.camera.position,n,{x:r.position.x,ease:Power2.easeInOut}),TweenLite.to(m.renderer3d.controls.target,n,{x:r.position.x,ease:Power2.easeInOut}),m._bayNode.innerHTML="<small>bay</small> "+r.iBay,i.prevnextNum=s)},toggleHatchCovers:function F(e){var t=y,i=e.target.checked,n=m.renderer3d.hatchDeck;t.hatchDecksVisible=i,t.isExpanded?(n.visible=!1,t._showBaysHatchCovers(i)):(n.visible=i,t._showBaysHatchCovers(!1))},_showBaysHatchCovers:function z(e){var t=void 0,i=void 0,n=m.renderer3d.g3Bays;for(t in n)i=n[t],i.isBlockStart&&i.hatchC&&(i.hatchC.visible=e)},disableRenderOnColorWidget:function W(e){m.toggleRendering(!e),m.renderer3d.controls.enabled=!e},updateSceneAfterCustomColors:function U(e,t,i){function n(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}var o=void 0,a=void 0,r=void 0,s=void 0,l=void 0;m.data.filters=e;for(o in t)a=o.split("."),2===a.length&&(s=e[a[0]].obs[a[1]],l=m.renderer3d.allMaterials[s.materialPos],r=n(s.color),l.color.setRGB(r.r/255,r.g/255,r.b/255),l.needsUpdate=!0);y.showColorsTable(h.value)}},m=new n.VesselsApp3D(l,d,u,c),m.loadUrl(v.json,s.LOADING_DATA).then(function(e){var t=m.renderer3d,i=void 0,n=m.modelsFactory,o=void 0,a=void 0;m.updateHtmlTitle(e.VesselName,e.PlaceOfDeparture,e.VoyageNumber),m.data=m.loadData(e);for(var s=0,l=m.data.data.info.contsL;l>s;s+=1){var d=m.data.data.conts[s];t.createBay(d.bay),n.addIsoModel(d)}n.extendSpecs(m.data.filters),i=new r.ColorsWidget(p,m.data.filters,h),i.onToggled=y.disableRenderOnColorWidget,i.onSaved=y.updateSceneAfterCustomColors,i.postUrl=window.writeColorsRoute,window.userSettings&&i.mergeColorSettings(window.userSettings),n.createBaseMaterials(m.data.filters),t.createBaseModels(n.isoModels),t.create3dContainersFromData(m.data),m.data.data.conts[0]&&t.putInfoWindow(m.data.data.conts[0]),y.init(),y.showColorsTable("i"),y.tryToLaunchBay(m.initialBay),o=t.maxDepth,a=Math.round(o/2),y.initialCameraPosition=t.setCameraPosition(-Math.round(.75*o),350,Math.round(.5*o)),t.controls.maxDistance=1.5*o,t.controls.target.z=a,y.initialCameraPosition.targetZ=a},function(e){m._node.loadingDiv.setMessage(e,!0),m._node.loadingDiv.updateLoader(0,1)}),window.appVessels3D=m},{"../colors/colors-widget.js":2,"../core/i18labels.js":4,"../core/vessels-3d.js":7,"../utils/dom-utilities.js":11,"../utils/js-helpers.js":12}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/js-helpers.js"),r=e("../utils/dom-utilities.js"),s=e("../core/i18labels.js"),l=function(){function e(t,i){var o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];n(this,e),this.isOpened=!1,this.btn=t,this.referenz=o,this.filters=i||{},this._currentOption=null,this._node=function(){var e=void 0,t=void 0,n=void 0,o=void 0,a=void 0,r=void 0,l=void 0,d=void 0,c=void 0,u=[],h=void 0,p="colors-container-"+Math.round(1e5*Math.random());e=document.createElement("div"),e.className="colors-container",e.innerHTML="<h2>"+s.CLICK_TO_CHANGE_COLORS+"</h2>",e.id=p,h=document.createElement("div"),h.className="colors-container-top",t=document.createElement("SELECT"),t.id=p+"-dropdwn",h.appendChild(t);for(d in i)c=i[d],u.push("<option value='"+d+"'>"+c.name+"</option>");return t.innerHTML=u.join(""),o=document.createElement("button"),o.innerHTML="SAVE",h.appendChild(o),a=document.createElement("button"),a.innerHTML="CANCEL",h.appendChild(a),e.appendChild(h),n=document.createElement("ul"),n.className="colors-container-ulColors",n.id=p+"-ulColors",e.appendChild(n),r=document.createElement("div"),r.className="colors-container-colorPicker",r.id=p+"-colorPicker",e.appendChild(r),e.dropdwn=t,e.ulColors=n,e.colorPickerDiv=r,e.btnSave=o,e.btnCancel=a,e.colorsTemp={},document.body.appendChild(e),e}(),this.onToggled=null,this.onSaved=null,this.postUrl=null,this._jsonColors={},r.addEventLnr(t,"click",this.toggleHandler.bind(this)),r.addEventLnr(this._node.dropdwn,"change",this.dropFilterChanged.bind(this)),r.addEventLnr(this._node.btnCancel,"click",this.close.bind(this)),r.addEventLnr(this._node.btnSave,"click",this.saveColors.bind(this)),r.addEventLnr(this._node.ulColors,"click",this.selectOption.bind(this))}return o(e,[{key:"mergeColorSettings",value:function t(e){var t=e,i=void 0,n=void 0,o=void 0,a=this.filters,r=void 0,l=void 0;if("String"==typeof e&&(t=JSON.parse(e)),!t.colors)return void console.warn(s.NO_COLOR_SETTINGS);for(i in t.colors)r=i.split("."),a[r[0]]&&a[r[0]].obs.hasOwnProperty(r[1])&&(n=t.colors[i],a[r[0]].obs[r[1]].color=n,a[r[0]].obs[r[1]].hexColor=parseInt(n.replace(/^#/,""),16),a[r[0]].obs[r[1]].colorIsRandom=!1);this._jsonColors=t.colors}},{key:"toggleHandler",value:function i(e){this.toggle(!this.isOpened)}},{key:"close",value:function a(){this.toggle(!1)}},{key:"toggle",value:function l(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=this.filters;return this._node.style.display=e?"block":"none",this.isOpened=e,e?(this._node.colorsTemp={},this.referenz&&""!==this.referenz.value&&t[this.referenz.value]&&(this._node.dropdwn.value=this.referenz.value),this.dropFilterChanged(),void(this.onToggled&&this.onToggled(!0))):void(this.onToggled&&this.onToggled(!1))}},{key:"dropFilterChanged",value:function d(){var e=this,t=[],i=void 0,n={0:"no",1:"yes"},o=this._node.dropdwn.value,a=this.filters[o],r=void 0,s=void 0,l=void 0;for(i in a.obs)l=e._node.colorsTemp[o+"."+i]||a.obs[i].color,t.push("<li data-color='"+l+"' id='liColor_"+o+"."+i+"'><span style='background:"+l+"'> </span>"+(a.tf?n[i]:i)+"&nbsp;</li>");this._node.ulColors.innerHTML=t.join(""),r=this._node.ulColors.getElementsByTagName("LI"),r&&0!==r.length&&(s=r[0],s.className="selected",this._currentOption=s,this._node.colorPickerJoe?this._node.colorPickerJoe.set(s.getAttribute("data-color")):(this._node.colorPickerJoe=colorjoe.rgb(this._node.colorPickerDiv,s.getAttribute("data-color")),this._node.colorPickerJoe.on("change",function(t){e._currentOption.setAttribute("data-color",t.hex()),e._currentOption.getElementsByTagName("SPAN")[0].style.background=t.hex(),e._node.colorsTemp[e._currentOption.id.replace("liColor_","")]=t.hex()})))}},{key:"selectOption",value:function c(e){var t=this,i=e.target,n=void 0,o=void 0,a=void 0;if("LI"===i.tagName&&(n=this._node.ulColors.getElementsByTagName("LI"),"selected"!==i.className)){for(o=0,a=n.length;a>o;o+=1)i!==n[o]&&(n[o].className="");setTimeout(function(){i.className="selected",t._node.colorPickerJoe.set(i.getAttribute("data-color"),!0),t._currentOption=i},150)}}},{key:"saveColors",value:function u(){var e=void 0,t=this._node.colorsTemp,i=this.filters,n={},o=[],a=void 0,r=void 0,s=void 0;for(e in t)a=e.split("."),2===a.length&&(r=t[e],i[a[0]].obs[a[1]].color=r,i[a[0]].obs[a[1]].hexColor=parseInt(r.replace(/^#/,""),16),i[a[0]].obs[a[1]].colorIsRandom=!1,n[a[0]]||(n[a[0]]=!0),o.push({attributeKey:a[0],attributeValue:a[1],hexColor:r}));this.close(),this.onSaved&&this.onSaved(i,t,n),this.postUrl&&(s=new XMLHttpRequest,s.open("POST",this.postUrl),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&console.log(s.responseText)},s.send(JSON.stringify(o)))}}]),e}();i.ColorsWidget=l},{"../core/i18labels.js":4,"../utils/dom-utilities.js":11,"../utils/js-helpers.js":12}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./i18labels.js"),r=e("../utils/js-helpers.js"),s=e("../utils/dom-utilities.js"),l=function(){function e(t){n(this,e),this.divLoading=t}return o(e,[{key:"loadUrl",value:function t(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=this;return new Promise(function(o,r){function l(e){var t=void 0;try{200===d.status?(t=JSON.parse(d.responseText),o(t)):r(d.statusText)}catch(i){r(a.ERROR_PARSING_JSON+" "+i.description)}}var d=void 0,c=function h(e){n.divLoading&&(n.divLoading.setMessage(e.responseText,!0),n.divLoading.updateLoader(0,1)),console.error(e)},u=function p(e){if(e.lengthComputable){var t=e.loaded/e.total;n.divLoading.updateLoader(t,.5)}};return n.divLoading.show(),e?(n.divLoading.show(),n.divLoading.startAnimation(),t&&n.divLoading.setMessage(t),d=new XMLHttpRequest,s.addEventLnr(d,"load",l),s.addEventLnr(d,"error",c),(n.divLoading||null!==i)&&s.addEventLnr(d,"progress",i||u),d.open("GET",e+(e.indexOf("?")>0?"&":"?")+"t="+1*new Date),void d.send()):void r(a.INVALID_DATA_SOURCE)})}},{key:"generateStructuredData",value:function i(e){function t(e){var t=e.bay,i=e.iBay;i%2===0&&(t=r.pad(i-1,3)),H[e.bay]?H[e.bay]+=1:H[e.bay]=1,E[t]||(E[t]={cells:{},n:0},E.n+=1,E[t].maxD=20),E[t].cells[e.cell]||(E[t].cells[e.cell]={tiers:{},n:0},E[t].n+=1,R||"00"!==e.cell||(R=!0)),E[t].cells[e.cell].tiers[e.tier]=e,E[t].cells[e.cell].n+=1,C<E[t].n&&(C=E[t].n),e.depth>E[t].maxD&&(E[t].maxD=e.depth),s.tier<"78"?(y.tiers[s.tier]||(y.tiers[s.tier]={h:e.h,accH:0},y.n+=1),e.h>y.tiers[s.tier].h&&(y.tiers[s.tier].h=e.h)):b.tiers[s.tier]||(b.tiers[s.tier]={h:e.h,accH:0},b.n+=1)}function i(e,t,i){x[e]={name:t,obs:{},tf:i}}function n(e){x.s.obs[e.s]||(x.s.obs[e.s]={c:1,indexes:[]}),x.i.obs[e.i]||(x.i.obs[e.i]={c:1,indexes:[]}),x.r.obs[e.r]||(x.r.obs[e.r]={c:1,indexes:[]}),x.w.obs[e.w]||(x.w.obs[e.w]={c:1,indexes:[]}),x.o.obs[e.o]||(x.o.obs[e.o]={c:1,indexes:[]}),x.d.obs[e.d]||(x.d.obs[e.d]={c:1,indexes:[]}),x.f.obs[e.f]||(x.f.obs[e.f]={c:1,indexes:[]}),x.t.obs[e.t]||(x.t.obs[e.t]={c:1,indexes:[]}),x.x.obs[e.x]||(x.x.obs[e.x]={c:1,indexes:[]}),x.s.obs[e.s].indexes.push(e),x.i.obs[e.i].indexes.push(e),x.r.obs[e.r].indexes.push(e),x.w.obs[e.w].indexes.push(e),x.o.obs[e.o].indexes.push(e),x.d.obs[e.d].indexes.push(e),x.f.obs[e.f].indexes.push(e),x.t.obs[e.t].indexes.push(e),x.x.obs[e.x].indexes.push(e)}var o=void 0,a=void 0,s=void 0,l=void 0,d=void 0,c=void 0,u=0,h=0,p=0,v={},m={},f={},y=void 0,b=void 0,g=void 0,E=void 0,x=void 0,w=void 0,T=void 0,C=0,R=!1,H={},B={},S={};for(g={conts:e["3DVesselData"],info:{contsL:e["3DVesselData"].length}},E={n:0},y={n:0,tiers:{}},b={n:0,tiers:{}},x={},i("i","Container ISO",!1),i("s","Full",!0),i("r","Reefer",!0),i("w","Hazardous",!0),i("t","Tank",!0),i("x","OOG",!0),i("o","Operator",!1),i("d","Destination",!1),i("f","Load Port",!1),a=0,o=g.conts.length;o>a;a+=1)s=g.conts[a],s.bay=s.p.substr(0,3),s.cell=s.p.substr(3,2),s.tier=s.p.substr(5,2),s.h=Number(Math.floor(s.h))+5*(s.h-Math.floor(s.h))/6,s.depth=Number(Math.floor(s.l))+5*(s.l-Math.floor(s.l))/6,s.iBay=Number(s.bay),s.iTier=Number(s.tier),s.myJ=a,s.cDash=s.c.replace(/\s/gi,"-"),B["cont_"+s.cDash]=s,t(s),n(s);return w=Number(_.min(_.keys(y.tiers))),T=Number(_.min(_.keys(b.tiers))),{data:g,dataStructured:E,belowTiers:y,aboveTiers:b,containersIDs:B,numContsByBay:H,allContainerMeshesObj:S,filters:x,iTierMin:w,iTierMinAbove:T,maxWidth:C,firstBay:_.min(_.keys(E)),lastBay:_.max(_.keys(E)),hasZeroCell:R}}}]),e}();i.DataLoader=l},{"../utils/dom-utilities.js":11,"../utils/js-helpers.js":12,"./i18labels.js":4}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="Loading 3D Model...";i.LOADING_DATA=n;var o="Error: Missing data source.";i.INVALID_DATA_SOURCE=o;var a="Error while parsing the JSON file.";i.ERROR_PARSING_JSON=a;var r="Click on colors to change them";i.CLICK_TO_CHANGE_COLORS=r;var s="No color settings found. Will use random.";i.NO_COLOR_SETTINGS=s},{}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/random-color.js"),r=function(){function e(t){n(this,e),this.models={},this.isoModels={},this.appScene=t}return o(e,[{key:"addIsoModel",value:function t(e){var t=this,i=t.isoModels;i[e.i]||(i[e.i]={d:e.depth,h:e.h,t:e.t})}},{key:"extendSpecs",value:function i(e){var t,i,n,o,r,s,l=this,d=new a.RColor,c,u,h=this.appScene.renderer3d;for(n in e){r=e[n];for(o in r.obs)s=r.obs[o],c=d.get(!0),u=parseInt(c.replace(/^#/,""),16),s.color=c,s.hexColor=u,s.colorIsRandom=!0}}},{key:"createBaseMaterials",value:function r(e){var t,i,n,o,a,r,s=this,l,d,c,u=this.appScene.renderer3d;for(n in e){a=e[n];for(o in a.obs)r=a.obs[o],c=r.hexColor,d=u.addContainerMaterial(c),r.materialPos=d}}}]),e}();i.ModelsFactory=r},{"../utils/random-color.js":14}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/js-helpers.js"),r=e("../utils/dom-utilities.js"),s=e("../text2D/SpriteText2D.js"),l=e("../text2D/textAlign.js"),d=function(){function e(t,i,o){n(this,e),this.scene=null,this.renderer=null,this.camera=null,this.raycaster=new THREE.Raycaster,this.mouseVector=new THREE.Vector2,this.controls=null,this.appScene=t,this.container=t._node,this.width=i,this.height=o,this.frames=0,this._INTERSECTED=null,this.followMouseEvents=!1,this.mouseStart=new THREE.Vector2,this.mouseLastClick=new Date,this._isRendering=!0,this._floatingCamera=!0,this._modelsLoaded={},this.g3Bays={},this.models={},this.maxDepth=0,this.maxWidth=0,this.shipHouse=null,this.simpleDeck=null,this.hatchCover=null,this.hatchCovers={},this.allMaterials=[],this.basicMaterial=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.3,wireframe:!0}),this.selectionMaterial=new THREE.MeshStandardMaterial({color:0,side:THREE.DoubleSide,opacity:1,transparent:!1}),this.containersGroup=null}return o(e,[{key:"init",value:function t(){function e(e,t,i){var n=new THREE.DirectionalLight(16777215,.3);return n.position.set(e,t,i),n.castShadow=!0,n.shadow.camera.left=-s,n.shadow.camera.right=s,n.shadow.camera.top=s,n.shadow.camera.bottom=-s,n.shadow.camera.far=1600,n.shadow.camera.near=1,n}var t=this,i=void 0,n=void 0,o=void 0,a=void 0,s=800,l=this.appScene.options;if(null===this.container||void 0===this.container)return void console.error("Container is null. Halting.");if(!this.width)return void console.error("Width is null or zero. Halting.");if(!this.height)return void console.error("Height is null or zero. Halting.");this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(l.colors.background,1),
this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.container.divRenderC.appendChild(this.renderer.domElement),this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,1,3e4),this.camera.position.z=l.initialCameraPosition.z,this.camera.position.x=l.initialCameraPosition.x,this.camera.position.y=l.initialCameraPosition.y,this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=l.dampingFactorOut||.2,this.controls.minPolarAngle=Math.PI/5,this.controls.maxPolarAngle=Math.PI/5*4,this.controls.maxDistance=2*l.initialCameraPosition.z,this.controls.minDistance=l.initialCameraPosition.z/2,this.controls.enableKeys=!1,this.controls.enablePan=!1,this.raycaster=new THREE.Raycaster,this.mouseVector=new THREE.Vector2,o=new THREE.Group,n=e(-s,s,-s),o.add(n),n=e(s,s,-s),o.add(n),n=e(s,s,s),o.add(n),n=e(-s,s,s),o.add(n),n=new THREE.DirectionalLight(16316398,.15),n.position.set(0,-300,-50),o.add(n),this.lightsGroup=o,n=new THREE.AmbientLight(l.colors.sunlight,.7),this.scene.add(n),this.scene.add(o);var d=new THREE.Object3D;this.scene.add(d),this.containersGroup=d,r.addEventLnr(window,"mousemove",function(e){t.mouseVector.x=e.clientX/t.width*2-1,t.mouseVector.y=2*-(e.clientY/t.height)+1})}},{key:"createBay",value:function i(e){var t=this,i=void 0,n=void 0,o=void 0;return t.g3Bays["b"+e]?t.g3Bays["b"+e]:(i=new THREE.Group,i.name="b"+e,i.iBay=Number(e),i.isBlockStart=!1,t.g3Bays["b"+e]=i,t.containersGroup.add(i),i)}},{key:"_addLabelsToBay",value:function d(e,t,i){var n=arguments.length<=3||void 0===arguments[3]?"FWD":arguments[3],o=arguments.length<=4||void 0===arguments[4]?"AFT":arguments[4],a=void 0,r=this.appScene.data.aboveTiers.n,d=this.appScene.options.extraSep,c=this.appScene.options.labelScale||2;a=new THREE.Group,a.name="labels",a.visible=!1,e.labelsCanBeVisible=!0;var u=new s(n,{align:l.center,font:"32px Arial",fillStyle:"#888888"});u.position.z=-15,u.scale.set(c,c,1),a.add(u),u=new s(o,{align:l.center,font:"32px Arial",fillStyle:"#888888"}),u.position.z=60,u.scale.set(c,c,1),a.add(u),e.add(a),e.labels=a,a.position.y=t,a.position.z=i}},{key:"addContainerMaterial",value:function c(e){var t=new THREE.MeshStandardMaterial({color:e,side:THREE.DoubleSide,transparent:!0,opacity:1});return this.allMaterials.push(t),this.allMaterials.length-1}},{key:"createBaseModels",value:function u(e){var t=this,i,n,o,a,r,s,l=this.appScene.data.filters,d,c;for(i in e)n=e[i],o=n.h,r=l.i.obs[i],n.t?(d=new THREE.CylinderGeometry(4,4,n.d,16),c=new THREE.Mesh(d,t.allMaterials[r.materialPos]),d.translate(-4,n.d/2,-4),c.rotation.z=-Math.PI/2,c.rotation.y=-Math.PI/2):(a=new THREE.Shape([new THREE.Vector2(0,0),new THREE.Vector2(0,o),new THREE.Vector2(8,o),new THREE.Vector2(8,0)]),d=new THREE.ExtrudeGeometry(a,{bevelEnabled:!1,steps:1,amount:n.d}),c=new THREE.Mesh(d,t.allMaterials[r.materialPos])),c.materialPos=r.materialPos,c.dynamic=!0,this.models[i]=c}},{key:"create3dContainersFromData",value:function h(e){var t=this,i=e.data,n=e.belowTiers,o=e.aboveTiers,r=e.iTierMin,s=e.iTierMinAbove,l=e.dataStructured,d=e.allContainerMeshesObj,c=e.numContsByBay,u=this.g3Bays,h=this.appScene._node.loadingDiv,p=this.appScene.options.extraSep,v=void 0,m=i.info.contsL,f=void 0,y=void 0,b=void 0,g=void 0,E=void 0,x=void 0,w=void 0,T=void 0,C=void 0,R=void 0,H=void 0,B=void 0,S=void 0,M=0,k=void 0,L=void 0,N=void 0,P=void 0,D=void 0,I=void 0,O=void 0,j=4,A=4-p,V=void 0,F=void 0,z=void 0,W=void 0,U=void 0,G=void 0,Z=void 0,J=[],K=void 0,q=void 0,Q=void 0,X=void 0,Y={},ee=new THREE.MeshStandardMaterial({color:6710886}),te=function ie(e,t){e.p===t.p?0:e.p<t.p?-1:1};for(V=_.max(_.keys(l)),U=l[V].maxD,A=_.reduce(n.tiers,function(e,t){return e+t.h+p},0)+A,K=0,v=1;V>=v;v+=2)y=a.pad(v,3),q=a.pad(v+1,3),Q=a.pad(v-1,3),X=u["b"+q],l[y]||(l[y]={cells:{},n:0,z:0}),v%2===1&&(M+=22.5+p),l[y].z=M,G=t.createBay(y),G.position.z=M,G.originalZ=M,G.isBlockStart=!0,X&&(X.position.z=M,X.originalZ=M),c[Q]&&(G.isBlockStart=!1),G.isBlockStart&&(K+=1,this._addLabelsToBay(G,o.n*(9.5+p),0)),G.compactBlockNum=K,X&&(X.compactBlockNum=K);for(Z=M+U,this.maxDepth=Z,this.maxWidth=e.maxWidth,this.maxCompactBlockNums=K,v=0,m=i.info.contsL;m>v;v+=1)T=i.conts[v],C=t.models[String(T.i)],F=T.iBay,z=Number(T.cell),k=(z%2===0?z/2:-(z+1)/2)*(8+p),W=Number(T.tier),L=W>=78?(W-s)/2*(9.5+p)+j:(W-r)/2*(9.5+p)-A,R=C.clone(),R.materialPos=C.materialPos,R.name="cont_"+T.cDash,R.objRef=T,R.position.x=k,R.position.y=L,R.position.z=0,R.updateMatrix(),R.matrixAutoUpdate=!1,R.isBasic=!1,u["b"+T.bay].add(R),d[T.cDash]=R;t._createShipDeck(),t._createHouse(o.n),t._createHatchCovers(),h.stopAnimation(),setTimeout(function(){h.hide()},500)}},{key:"_createHatchCovers",value:function p(){function e(e){var t=void 0,i=void 0,n=void 0,o=void 0,a=void 0;n=5===e||6===e||9===e?3:4>=e?e:4,t=e/n,i=Math.ceil(t),a=new Array(i);for(var r=0;i>r;r+=1)a[r]=n;return o=Math.ceil((t-Math.floor(t))*n),o>0&&(a[Math.floor(i/2)]=o),a}function t(e,t){var n=void 0,o=void 0,a=void 0,r=e*(8+i)-i;return n=new THREE.Shape([new THREE.Vector2(-r,0),new THREE.Vector2(-r,t),new THREE.Vector2(0,t),new THREE.Vector2(0,0)]),o=new THREE.ExtrudeGeometry(n,{bevelEnabled:!1,steps:1,amount:3}),a=new THREE.Mesh(o,k),a.rotation.x=Math.PI/2,o.translate(8.5+i,0,0),a}var i=this.appScene.options.extraSep,n=this.maxWidth,o=this.maxDepth,r=n*(8+i),s=this.appScene.data.dataStructured,l=this.g3Bays,d=this.appScene.data.lastBay,c=this.appScene.data.hasZeroCell?1:0,u=[],h=void 0,p=void 0,v=void 0,m=void 0,f=void 0,y=[],b=void 0,g=0,E=void 0,x=new THREE.Group,w=void 0,T=void 0,C=void 0,R=void 0,H=void 0,B=void 0,S=void 0,M=void 0,k=new THREE.MeshStandardMaterial({color:6710886}),L=45,N=function F(e){return(e%2===0?e/2:-(e+1)/2)*(8+i)};for(h=1;d+1>=h;h+=2)v=a.pad(h,3),m=l["b"+v],m&&(f=Number(m.compactBlockNum),y[f]?(y[f].posLeft=Math.max(y[f].posLeft,Number(_.max(_.filter(_(s[v].cells).keys(),function(e){return Number(e)%2===0}),function(e){return Number(e)}))),y[f].posRight=Math.max(y[f].posRight,Number(_.max(_.filter(_(s[v].cells).keys(),function(e){return Number(e)%2===1}),function(e){return Number(e)})))):y[f]={baseBay:m.iBay,cbn:f,cells:s[v].n,maxD:s[v].maxD,posLeft:Number(_.max(_.filter(_(s[v].cells).keys(),function(e){return Number(e)%2===0}),function(e){return Number(e)})),posRight:Number(_.max(_.filter(_(s[v].cells).keys(),function(e){return Number(e)%2===1}),function(e){return Number(e)}))},g=f);for(y[1].maxLeftUp=y[1].posLeft,y[1].maxRightUp=y[1].posRight,y[g].maxLeftDown=y[g].posLeft,y[g].maxRightDown=y[g].posRight,h=2,p=g+1;p>h;h+=1)y[h].maxLeftUp=Math.max(y[h-1].maxLeftUp,y[h].posLeft),y[h].maxRightUp=Math.max(y[h-1].maxRightUp,y[h].posRight),y[p-h].maxLeftDown=Math.max(y[p-h+1].maxLeftDown,y[p-h].posLeft),y[p-h].maxRightDown=Math.max(y[p-h+1].maxRightDown,y[p-h].posRight);for(h=1,p=g+1;p>h;h+=1)y[h].maxLeft=Number(Math.min(y[h].maxLeftUp,y[h].maxLeftDown)),y[h].maxRight=Number(Math.min(y[h].maxRightUp,y[h].maxRightDown)),E=Math.max(y[h].maxLeft,y[h].maxRight),S=y[h].maxD?y[h].maxD<=20?22.5:45:22.5,0!==S&&(1===h?u.push({d:S,l:y[h].maxLeft,b:y[h].baseBay,hts:e(E+c)}):y[h].maxLeft===y[h-1].maxLeft&&y[h].maxRight===y[h-1].maxRight&&u[u.length-1].d+(y[h].maxD||45)<=L?u[u.length-1].d+=y[h].maxD||45:u.push({d:S,l:y[h].maxLeft,b:y[h].baseBay,hts:e(E+c)}));for(B=22.5,h=0,p=u.length;p>h;h+=1){T=u[h],M=new THREE.Group,M.name="baseBay-"+T.b,M.baseBay=T.b,this.hatchCovers["b"+a.pad(T.b,3)]=M,R=T.l,H=N(R);for(var P=0,D=T.hts.length;D>P;P+=1)C=T.hts[P],w=t(C,T.d),w.position.x=H-2*i,M.add(w),H-=C*(8+i);M.position.z=B,M.originalZ=B,x.add(M),B+=T.d+2*i}for(v in l)if(m=l[v],m.isBlockStart){if(b=y[m.compactBlockNum],!b.maxD)continue;var I=N(b.maxLeft),O=N(b.maxRight),j=new THREE.Shape([new THREE.Vector2(I+c*(8+i),0),new THREE.Vector2(O,0),new THREE.Vector2(O,b.maxD),new THREE.Vector2(I+c*(8+i),b.maxD)]),A=new THREE.ExtrudeGeometry(j,{bevelEnabled:!1,steps:1,amount:2}),V=new THREE.Mesh(A,k);V.rotation.x=Math.PI/2,V.position.y=1,V.visible=!1,m.add(V),m.hatchC=V}this.scene.add(x),x.position.y=1.5,this.hatchDeck=x}},{key:"_createShipDeck",value:function v(){var e=new THREE.LineBasicMaterial({color:4033704,opacity:1,linewidth:2}),t=this.appScene.options.extraSep,i=this.maxWidth,n=this.maxDepth,o=void 0,a=new THREE.CurvePath,r=void 0,s=void 0,l=i*(8+t)/4;a.add(new THREE.EllipseCurve(4,20,l,3*l,Math.PI,0,!1)),a.add(new THREE.EllipseCurve(4,n,l,.75*l,0,Math.PI,!1)),a.closePath(),r=a.createPointsGeometry(150),s=new THREE.Line(r,e),s.rotation.x=Math.PI/2,this.scene.add(s),this.simpleDeck=s}},{key:"_createHouse",value:function m(e){var t=this.appScene.options.extraSep,i=this.maxWidth,n=this.appScene.data.belowTiers,o=i*(8+t)/2*.9,a=Math.max(1,e)*(9.5+t)+6,r,s,l,d,c=Math.max(1,.7*n.n),u=c*(9.5+t),h=c*(8+t)/2,p,v=new THREE.MeshPhongMaterial({color:6075098,side:THREE.DoubleSide}),m=new THREE.MeshPhongMaterial({color:11184810,side:THREE.DoubleSide});s=new THREE.Shape([new THREE.Vector2(0,-u),new THREE.Vector2(-h,-u),new THREE.Vector2(-o,0),new THREE.Vector2(-o,a),new THREE.Vector2(-o-.25*o,a+10),new THREE.Vector2(-o-.25*o,a+20),new THREE.Vector2(-o,a+20),new THREE.Vector2(-o+.125*i,a+24),new THREE.Vector2(o-.125*i,a+24),new THREE.Vector2(o,a+20),new THREE.Vector2(o+.25*o,a+20),new THREE.Vector2(o+.25*o,a+10),new THREE.Vector2(o,a),new THREE.Vector2(o,0),new THREE.Vector2(h,-u),new THREE.Vector2(0,-u)]),r=new THREE.ExtrudeGeometry(s,{bevelEnabled:!1,steps:1,amount:20}),l=new THREE.Mesh(r,m),l.matrixAutoUpdate=!1,p=new THREE.Object3D,p.name="house",p.add(l),s=new THREE.Shape([new THREE.Vector2(-1.125*o,0),new THREE.Vector2(-1.125*o,7),new THREE.Vector2(1.125*o,7),new THREE.Vector2(1.125*o,0)]),d=new THREE.ShapeGeometry(s),l=new THREE.Mesh(d,v),l.position.y=a+10,l.position.z=-.25,l.matrixAutoUpdate=!1,l.updateMatrix(),p.add(l),l=new THREE.Mesh(d,v),l.position.y=a+10,l.position.z=20.25,l.matrixAutoUpdate=!1,l.updateMatrix(),p.add(l),d=new THREE.SphereGeometry(5,32,32),l=new THREE.Mesh(d,m),l.position.y=a+24,l.position.z=10,l.position.x=o-10,l.matrixAutoUpdate=!1,l.updateMatrix(),p.add(l),d=new THREE.SphereGeometry(5,32,32),l=new THREE.Mesh(d,m),l.position.y=a+24,l.position.z=10,l.position.x=-o+10,l.matrixAutoUpdate=!1,l.updateMatrix(),p.add(l),p.position.x=4,p.position.z=-20,p.visible=!1,this.scene.add(p),this.shipHouse={mesh:p,dropdown:null,currPosBay:0,currPosZ:0}}},{key:"setCameraPosition",value:function f(e,t,i){return this.camera.position.z=i,this.camera.position.x=e,this.camera.position.y=t,this.controls.maxDistance=2*i,this.controls.minDistance=i/2,{x:e,y:t,z:i}}},{key:"resize3DViewer",value:function y(e,t){this.camera&&(this.width=e,this.height=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t))}},{key:"loadModel",value:function b(e,t,i,n){var o=this,a=this.container,s=a.loadingDiv,l=this.appScene.options,d=void 0,c=void 0,u=void 0,h=void 0,p=void 0,v=void 0,m=void 0,f=function b(e){var t=e.loaded/(e.total||3e6);s.updateLoader(t,.3)},y=function g(e){var t=r.addEventDsptchr("modelLoaded");t.data={model:e},a.dispatchEvent(t),s.updateLoader(1,.5),setTimeout(function(){s.hide()},500)};return new Promise(function(e,a){var r=n.replace(".","_");return o._modelsLoaded[r]?void e(r):(s=o.container.loadingDiv,s.setPercentage(0),s.setMessage("Loading model..."),s.show(),v=new THREE.MTLLoader,v.setBaseUrl(t+"textures/"),v.setPath(t),void v.load(i,function(i){var s=void 0,l=void 0;i.preload(),m=new THREE.OBJLoader,m.setPath(t),m.setMaterials(i),m.load(n,function(t){var i=void 0,n=new THREE.Object3D;t.traverse(function(e){i=new THREE.Mesh(e.geometry,e.material),i.name=e.name,i.receiveShadow=!0,i.castShadow=!0,n.add(i)}),o._modelsLoaded[r]=n,y(),e(r)},f,function(e){window.alert("An error happened loading assets"),console.error(e),a()})}))})}},{key:"animate",value:function g(){function e(){requestAnimationFrame(e),t.controls.update(),t.render()}var t=this;e()}},{key:"render",value:function E(){var e=void 0,t=void 0,i=void 0,n=void 0,o=void 0;if(this._isRendering){if(this.frames+=1,1&this.frames)if(this.raycaster.setFromCamera(this.mouseVector.clone(),this.camera),e=this.raycaster.intersectObjects(this.containersGroup.children,!0),t=e.length,t>1){var a=this.appScene.data.containersIDs;i=e[1].object.name,null!==i&&void 0!==i&&(n=a[i],n&&e[1].object!==this._INTERSECTED&&(this._INTERSECTED&&(this._INTERSECTED.material=this._INTERSECTED.isBasic?this.basicMaterial:this.allMaterials[this._INTERSECTED.materialPos]),this._INTERSECTED=e[1].object,this._INTERSECTED.isBasic||(this._INTERSECTED.material=this.selectionMaterial),this.putInfoWindow(n)))}else this._INTERSECTED&&(this._INTERSECTED.material=this._INTERSECTED.isBasic?this.basicMaterial:this.allMaterials[this._INTERSECTED.materialPos],this._INTERSECTED=null);this.renderer.render(this.scene,this.camera)}}},{key:"putInfoWindow",value:function x(e){this.appScene._infoNode.innerHTML="<small>Position:</small> "+e.p+"<br /><small>ID:</small> "+e.c+"<br /><small>ISO:</small> "+e.i+(e.r?" / Reefer":"")+" <small>Status:</small> "+(e.s?"full":"empty")+"<br /><small>Carrier:</small> "+e.o+"<br /><small>POD:</small> "+e.d+"<br /><small>POL:</small> "+(e.f||"")+" <small>Weight:</small> "+e.m+"MT",this.appScene._bayNode.innerHTML="<small>bay</small> "+e.iBay}}]),e}();i.Renderer3D=d},{"../text2D/SpriteText2D.js":9,"../text2D/textAlign.js":10,"../utils/dom-utilities.js":11,"../utils/js-helpers.js":12}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../utils/js-helpers.js"),r=e("../utils/dom-utilities.js"),s=e("../utils/preloader.js"),l=e("./renderer.js"),d=e("./data-loader.js"),c=e("./models-factory.js"),u=e("./i18labels.js"),h=function(){function e(t,i,o,r,l){n(this,e);var c=this,u=a.getQueryParams(),h=1.1;this.options=a.extend({extraSep:.5,loaderColor:"#f2f2f2",loaderColorSucess:"#79e3da",colors:{background:13823736,sunlight:14869230},dampingFactorOut:.2,dampingFactorIn:.75,initialCameraPosition:{x:0,y:0,z:100},labelScale:8,screenshots:{width:600,height:600,format:"png",transparent:!0}},l),this.width=0,this.height=0,this._titleNode=i,this._bayNode=r,this._infoNode=o,this._node=function p(){var e=void 0,i=void 0,n=void 0,o=void 0,a="app3d-container-"+Math.round(1e5*Math.random());return e=document.createElement("div"),e.className="app3d-container",e.id=a,i=document.createElement("div"),i.className="app3d-render-container",i.id=a+"-render",e.appendChild(i),e.divRenderC=i,n=document.getElementById("app-3d-loading-div"),n||(n=document.createElement("div"),n.className="app3d-loading-div",n.id=a+"-loading-div",e.appendChild(n)),o=document.getElementById("app-3d-loading-div-text"),o||(o=document.createElement("div"),o.className="app3d-loading-div-text",o.id=a+"-loading-text",n.appendChild(o)),e.loadingDiv=new s(n,o,100,c.options,"img-loader-logo"),t.appendChild(e),e}(),this.initialBay=u.bay,this.data=null,this.dataLoader=new d.DataLoader(this._node.loadingDiv),this.renderer3d=null,this.modelsFactory=null,this._init()}return o(e,[{key:"loadUrl",value:function t(e,i,n){return this.dataLoader.loadUrl(e,i,n)}},{key:"loadData",value:function i(e){return this.dataLoader.generateStructuredData(e)}},{key:"_init",value:function u(){var e=this,t=void 0,i=void 0,n=void 0,o=this._node,a=Detector.canvas&&Detector.webgl;return a?(this.updateSize(),this.renderer3d=new l.Renderer3D(this,this.width,this.height),this.renderer3d.init(),this.renderer3d.animate(),this.modelsFactory=new c.ModelsFactory(this),void r.addEventLnr(window,"resize",function(){e.updateSize()})):(o.loadingDiv.show(),void o.loadingDiv.setMessage(o.parentNode.getAttribute(window.WebGLRenderingContext?"data-webgl":"data-gpu")))}},{key:"updateHtmlTitle",value:function h(e,t,i){var n=this,o=void 0;n._titleNode&&(o=(e?e:"")+(t?" / "+t:"")+(i?" / "+i:""),o?(n._titleNode.innerHTML=o,document.title=o+" / "+document.title):n._titleNode.style.display="none")}},{key:"getDimensions",value:function p(){return{width:this.width,height:this.height}}},{key:"_setDimensions",value:function v(e,t){this.width=e,this.height=t}},{key:"updateSize",value:function m(){var e=void 0,t=void 0,i=void 0,n=void 0,o=void 0,a=void 0;e=this._node,t=e.parentNode,null!==t&&void 0!==t&&(n=this.getDimensions(),o=t.offsetWidth,a=t.offsetHeight,n.width===o&&n.height===a||(e.style.width=o+"px",e.style.height=a+"px",this.renderer3d&&this.renderer3d.resize3DViewer(o,a),this._setDimensions(o,a),i=r.addEventDsptchr("resize"),this._node.dispatchEvent(i)))}},{key:"pauseRendering",value:function f(){this.renderer3d&&(this.renderer3d._isRendering=!1)}},{key:"resumeRendering",value:function y(){this.renderer3d&&(this.renderer3d._isRendering=!0)}},{key:"toggleRendering",value:function b(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.renderer3d&&(this.renderer3d._isRendering=!!e)}},{key:"generateScreenshot",value:function g(){var e=arguments.length<=0||void 0===arguments[0]?this.options.screenshots.width:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.options.screenshots.height:arguments[1],i=arguments.length<=2||void 0===arguments[2]?this.options.screenshots.format:arguments[2],n=arguments.length<=3||void 0===arguments[3]?this.options.screenshots.transparent:arguments[3];return data}}]),e}();i.VesselsApp3D=h},{"../utils/dom-utilities.js":11,"../utils/js-helpers.js":12,"../utils/preloader.js":13,"./data-loader.js":3,"./i18labels.js":4,"./models-factory.js":5,"./renderer.js":6}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=r[e];if(!t){var i=document.getElementsByTagName("body")[0],n=document.createElement("div"),o=document.createTextNode("span");n.appendChild(o),n.setAttribute("style","font:"+e+";position:absolute;top:0;left:0"),i.appendChild(n),t=n.offsetHeight,r[e]=t,i.removeChild(n)}return t}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r={},s=function(){function e(){n(this,e),this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}return a(e,[{key:"drawText",value:function t(e,i){return this.ctx.font=i.font,this.textWidth=Math.ceil(this.ctx.measureText(e).width),this.textHeight=o(this.ctx.font),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=i.fillStyle,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=i.font,this.ctx.fillStyle="#000",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(e,this.canvas.width/2,this.canvas.height/2),this.canvas}},{key:"width",get:function i(){return this.canvas.width}},{key:"height",get:function r(){return this.canvas.height}}]),e}();t.exports=s},{}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function c(e,t,i){for(var n=!0;n;){var o=e,a=t,r=i;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(r)}var d=Object.getPrototypeOf(o);if(null===d)return;e=d,t=a,i=r,n=!0,s=d=void 0}},s=e("./textAlign.js"),l=e("./CanvasText.js"),d=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this._font=i.font||"30px Arial",this._fillStyle=i.fillStyle||"#FFFFFF",this.canvas=new l,this.align=i.align||s.center,this.antialias=!0,this.text=e}return o(t,e),a(t,[{key:"updateText",value:function i(){this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle}),this.cleanUp(),this.texture=new THREE.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new THREE.SpriteMaterial({map:this.texture}),this.sprite||(this.sprite=new THREE.Sprite(this.material),this.geometry=this.sprite.geometry,this.add(this.sprite))}},{key:"cleanUp",value:function d(){this.texture&&this.texture.dispose()}},{key:"applyAntiAlias",value:function c(){this.antialias===!1&&(this.texture.magFilter=THREE.NearestFilter,this.texture.minFilter=THREE.LinearMipMapLinearFilter)}},{key:"width",get:function u(){return this.canvas.textWidth}},{key:"height",get:function h(){return this.canvas.textHeight}},{key:"text",get:function p(){return this._text},set:function v(e){this._text!==e&&(this._text=e,this.updateText())}},{key:"font",get:function m(){return this._font},set:function f(e){this._font!==e&&(this._font=e,this.updateText())}},{key:"fillStyle",get:function y(){return this._fillStyle},set:function b(e){this._fillStyle!==e&&(this._fillStyle=e,this.updateText())}}]),t}(THREE.Object3D);t.exports=d},{"./CanvasText.js":8,"./textAlign.js":10}],10:[function(e,t,i){"use strict";t.exports={center:new THREE.Vector2(0,0),left:new THREE.Vector2(1,0),topLeft:new THREE.Vector2(1,-1),topRight:new THREE.Vector2(-1,-1),right:new THREE.Vector2(-1,0),bottomLeft:new THREE.Vector2(1,1),bottomRight:new THREE.Vector2(-1,1)}},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function s(e){return e&&e.tagName&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()&&"text"===e.type.toLowerCase())};i.isInputOrTextarea=n;var o=function l(e){return"object"==typeof HTMLElement?id instanceof HTMLElement:"object"==typeof id&&1===id.nodeType&&"string"==typeof id.nodeName};i.isHtmlNode=o;var a=function d(e,t,i){window.attachEvent?(e["e"+t+i]=i,e[t+i]=function(){e["e"+t+i](window.event)},e.attachEvent("on"+t,e[t+i])):e.addEventListener(t,i,!1)};i.addEventLnr=a;var r=function c(e){if(window.Event&&"function"==typeof window.Event)return new Event(e);var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};i.addEventDsptchr=r},{}],12:[function(e,t,i){"use strict";function n(e,t,i){e?t.apply(null,arguments):i.apply(null,arguments)}Object.defineProperty(i,"__esModule",{value:!0}),i.callOnCondition=n;var o=function p(e){return Array.isArray?Array.isArray(e):e instanceof Array};i.isArray=o;var a=function v(e,t){var i=void 0,n=JSON.parse(JSON.stringify(e));if(t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=t[i]);return n};i.extend=a;var r=function m(e,t){return e-t};i.sortNumeric=r;var s=function f(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],n=e;return t&&(n=n.replace(/^\s\s*/,"")),i&&(n=n.replace(/\s\s*$/,"")),n};i.trimString=s;var l=function y(e){var t=void 0,i=void 0,n=new Set;for(t=0,i=e.length;i>t;t+=1){var o=s(e[t]);n.has(o)||n.add(o)}return ouputSet};i.arrayToSet=l;var d=function b(e,t){var i=void 0,n=[];for(i in e)n.push(i);return t&&(n=n.sort(r)),n};i.objKeysToArray=d;var c=function g(e){var t=Number(e).toString(16);return t="000000".substr(0,6-t.length)+t,t.toUpperCase()};i.decimalToHex=c;var u=function E(e,t){var i="000"+String(e);return i.substr(i.length-t)};i.pad=u;var h=function x(){for(var e=document.location.search.split("+").join(" "),t={},i=void 0,n=/[?&]?([^=]+)=([^&]*)/g;i=n.exec(e);)t[decodeURIComponent(i[1])]=decodeURIComponent(i[2]);return t};i.getQueryParams=h},{}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i,o,a,r,s){void 0===t&&(t=mandatory()),n(this,e);var l=void 0;null!==t&&void 0!==t&&(this.node=t,l=document.createElement("canvas"),this.messages=i,this.canv=l,this.ctx=l.getContext("2d"),this.loadCurrent=0,this.radius=o,this.canv.width=Math.round(2*o),this.canv.height=Math.round(2*o),this.setPixelRatio(),this.opts=a,this.node.appendChild(l),this.image=r?document.getElementById(r):null,s&&this.setMessage(s))}return o(e,[{key:"rectLoader",value:function t(){var e=this.loadCurrent,t=this.ctx,i=this.radius,n=2*i,o=Math.round(i/2),a=2*e*Math.PI,r=this.opts;t.clearRect(0,0,n,n),t.beginPath(),t.arc(i,i,o,0,2*Math.PI,!1),t.fillStyle=r.loaderColor,t.fill(),t.lineWidth=1,t.strokeStyle=r.loaderColor,t.stroke(),t.beginPath(),t.arc(i,i,Math.round(o/2),0,a,!1),t.lineWidth=o,t.strokeStyle=r.loaderColorSucess,t.stroke(),this.image&&t.drawImage(this.image,o,o,i,i)}},{key:"setPixelRatio",value:function i(){var e=void 0,t=void 0,i=this.ctx,n=window.devicePixelRatio||1,o=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,a=n/o;n!==o&&(e=this.canv.width,t=this.canv.height,this.canv.width=e*a,this.canv.height=t*a,this.canv.style.width=e+"px",this.canv.style.height=t+"px",this.ctx.scale(a,a))}},{key:"setMessage",value:function a(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.messages&&(this.messages.innerHTML=e,this.messages.style.color=t?"red":"")}},{key:"updateLoader",value:function r(e,t){var i=this;i.node&&TweenLite.to(i,t,{loadCurrent:e,ease:Power1.easeInOut,onUpdate:i.rectLoader,onUpdateScope:i})}},{key:"startAnimation",value:function s(){this.node&&(this.rectLoader(),this.updateLoader(.4,2))}},{key:"stopAnimation",value:function l(){this.node&&this.updateLoader(1,.25)}},{key:"setPercentage",value:function d(e){this.node&&(this.loadCurrent=e,this.rectLoader())}},{key:"show",value:function c(){this.node&&(this.node.style.display="block")}},{key:"hide",value:function u(){this.node&&(this.node.style.display="none")}}],[{key:"mandatory",value:function h(){throw new Error("Missing parameter")}}]),e}();i["default"]=a,t.exports=i["default"]},{}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}return o(e,[{key:"hsvToRgb",value:function t(e,i,n){var o=Math.floor(6*e),a=6*e-o,r=n*(1-i),s=n*(1-a*i),l=n*(1-(1-a)*i),d=255,c=255,u=255;switch(o){case 0:d=n,c=l,u=r;break;case 1:d=s,c=n,u=r;break;case 2:d=r,c=n,u=l;break;case 3:d=r,c=s,u=n;break;case 4:d=l,c=r,u=n;break;case 5:d=n,c=r,u=s}return[Math.floor(256*d),Math.floor(256*c),Math.floor(256*u)]}},{key:"padHex",value:function i(e){return e.length>this.hexwidth?e:new Array(this.hexwidth-e.length+1).join("0")+e}},{key:"get",value:function a(e,t,i){this.hue+=this.goldenRatio,this.hue%=1,"number"!=typeof t&&(t=.5),"number"!=typeof i&&(i=.95);var n=this.hsvToRgb(this.hue,t,i);return e?"#"+this.padHex(n[0].toString(16))+this.padHex(n[1].toString(16))+this.padHex(n[2].toString(16)):n}}]),e}();i.RColor=a},{}]},{},[1]);